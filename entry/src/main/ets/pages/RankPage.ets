// å®šä¹‰ RankItem æ¥å£
import router from '@system.router';
interface RankItem {
  rank: number;
  name: string;
  time: string;
}

// å®šä¹‰ LevelData æ¥å£
interface LevelData {
  title: string;
  data: RankItem[];
}

@Entry
@Component
struct RankPage {
  // å®šä¹‰ levelData çš„ç±»å‹ä¸º LevelData[]
  private levelData: LevelData[] = [
    {
      title: "ç¬¬ä¸€å…³",
      data: [
        { rank: 1, name: "å°å…”å…”", time: "00:21" },
        { rank: 2, name: "ç”œè‰è“", time: "00:45" },
        { rank: 3, name: "è¥¿é«˜åœ°", time: "00:46" },
      ],
    },
    {
      title: "ç¬¬äºŒå…³",
      data: [
        { rank: 1, name: "èƒ¡èåœ", time: "00:32" },
        { rank: 2, name: "æ£‰èŠ±ç³–", time: "00:37" },
        { rank: 3, name: "å¥¥åˆ©å¥¥", time: "00:44" },
      ],
    },
    {
      title: "ç¬¬ä¸‰å…³",
      data: [
        { rank: 1, name: "å°ç½—", time: "00:45" },
        { rank: 1, name: "å°æ¨", time: "00:46" },
        { rank: 2, name: "é…¸å¥¶", time: "00:58" },
      ],
    },
    {
      title: "ç¬¬å››å…³",
      data: [
        { rank: 1, name: "Tina", time: "00:52" },
        { rank: 2, name: "Mark", time: "01:02" },

      ],
    },
    {
      title: "ç¬¬äº”å…³",
      data: [
        { rank: 1, name: "æœˆäº®å¾®ç”œ", time: "01:10" },
        { rank: 3, name: "è¿·ç³Šè¿·ç³Š", time: "01:15" },
      ],
    },
  ];

  build() {
    // èƒŒæ™¯å›¾ç‰‡è®¾ç½®
    Stack() {
      // èƒŒæ™¯å›¾
      Image($r('app.media.background6'))
        .width("100%")
        .height("100%")
        .objectFit(ImageFit.Cover);

      // æ’è¡Œæ¦œå†…å®¹
      Column() {
        // é¡µé¢æ ‡é¢˜
        Text("æ’è¡Œæ¦œ")
          .fontSize(30)
          .fontWeight(FontWeight.Bold)
          // .margin({ top: 5, bottom: 5 })
          .textAlign(TextAlign.Center)
          .fontColor("#FFFFFF")
          .width("100%")


        // æ¸²æŸ“æ¯ä¸€å…³çš„æ’è¡Œæ¦œ
        ForEach(this.levelData, (level: LevelData) => {
          this.renderLevel(level.title, level.data);
        });
        // æ·»åŠ è¿”å›æŒ‰é’®
        Button('è¿”å›')
          .width("400px")
          .height("110px")
          .onClick(() => {
            // é¡µé¢è·³è½¬åˆ° MenuPage
          router.push({
            uri: 'pages/MenuPage',
          });
          })
          // .margin({ top: 20, bottom: 20 })
          .backgroundColor("#ff3487d4")
          .fontColor("#FFFFFF");
      }
      .padding(10)
      .height("100%")
      .width("100%")
      .backgroundColor(Color.Transparent); // èƒŒæ™¯é€æ˜ï¼Œå±•ç¤ºå›¾ç‰‡
    }
  }

  // æ¸²æŸ“æ¯ä¸€å…³çš„æ’è¡Œæ¦œï¼ˆä½¿ç”¨ @Builder ä¿®é¥°ï¼‰
  @Builder
  private renderLevel(title: string, data: RankItem[]) {
    Column() {
      // å…³å¡æ ‡é¢˜
      Text(title)
        .fontSize(20)
        .fontWeight(FontWeight.Bold)
        .fontColor("#fffa9a60")
        .margin({ top: 5, bottom: 5 });

      // æ¯æ¡æ•°æ®çš„å±•ç¤º
      ForEach(data, (item: RankItem) => {
        Row() {
          // æ’åå›¾æ ‡
          Text(this.getMedalEmoji(item.rank))
            .fontSize(20)
            .margin({ right: 10 });

          // ç©å®¶åå­—
          Text(item.name)
            .fontSize(20)
            .fontWeight(FontWeight.Normal)
            .flexGrow(1);

          // é€šå…³æ—¶é—´
          Text(item.time).fontSize(20);
        }.margin({ top: 5, bottom: 5 });
      });
    }.margin({ bottom: 5 });
  }

  // æ ¹æ®æ’åè¿”å›å¥–ç‰Œ Emoji
  private getMedalEmoji(rank: number): string {
    switch (rank) {
      case 1:
        return "ğŸ¥‡";
      case 2:
        return "ğŸ¥ˆ";
      case 3:
        return "ğŸ¥‰";
      default:
        return "";
    }
  }
}
